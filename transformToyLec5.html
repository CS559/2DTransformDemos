<html>
<style>
    .c-zero {
        color: lightgray;
    }

    .c-act {
        color: red;
    }

    .c-one {
        color: black;
    }
</style>
<header>
    <link rel="stylesheet" href="Libs/style559.css">
</header>

<body>
    <script type="module">
        import { createExample, makeSelect } from "./transformToy.js";

        /**
         * Set up the demo
         */
        window.onload = function () {
            let headingDiv = document.createElement("div");
            headingDiv.id = "headingDiv";
            document.getElementsByTagName("body")[0].appendChild(headingDiv);

            let br = document.createElement("br");
            document.getElementsByTagName("body")[0].appendChild(br);

            // examples from lecture 5
            let examples = [
                {
                    title: "Three Tris, Two Trans",
                    transformations:
                        [
                            ["triangle",0,0,"blue"],
                            ["translate",20,0],
                            ["triangle",0,0,"purple"],
                            ["translate",0,20],
                            ["triangle",0,0,"red"]
                        ]
                }, {
                    title: "Three Tris, Save/Restore",
                    transformations:
                        [
                            ["triangle",0,0,"blue"],
                            ["save"],
                            ["translate",20,0],
                            ["triangle",0,0,"purple"],
                            ["restore"],
                            ["save"],
                            ["translate",20,20],
                            ["triangle",0,0,"red"],
                            ["restore"]
                        ]
                }, {
                    title: "Scale",
                    transformations:
                        [
                            ["fillRect", 0, 0, 20, 20, "#800000"],
                            ["scale", 2, 2],
                            ["fillRect", 0, 0, 20, 20, "#F0000080"]
                        ]
                }, {
                    title: "Scale and Translate",
                    transformations:
                        [
                            ["scale", 2,2],
                            ["translate",10,0],
                            ["fillRect", 0, 0, 10, 10, "#F0000080"]
                        ]
                }, {
                    title: "Translate and Scale",
                    transformations:
                        [
                            ["translate",10,0],
                            ["scale", 2,2],
                            ["fillRect", 0, 0, 10, 10, "#0000FF80"]
                        ]
                }, {
                    title: "Scale/Translate vs. Translate/Scale",
                    transformations:
                        [
                            ["save"],
                            ["scale", 2,2],
                            ["translate",10,0],
                            ["fillRect", 0, 0, 10, 10, "#F0000080"],
                            ["restore"],
                            ["save"],
                            ["translate",10,0],
                            ["scale", 2,2],
                            ["fillRect", 0, 0, 10, 10, "#0000FF80"],
                            ["restore"],
                        ]
                }, {
                    title: "rotate",
                    transformations:
                        [
                            ["rotate", 45],
                            ["fillRect", 0, 0, 20, 20]
                        ]
                }, {
                    title: "Rotate and Translate",
                    transformations:
                        [
                            ["rotate", 45],
                            ["translate",10,0],
                            ["fillRect", 0, 0, 10, 10, "#F0000080"]
                        ]
                }, {
                    title: "Translate and Rotate",
                    transformations:
                        [
                            ["translate",10,0],
                            ["rotate", 45],
                            ["fillRect", 0, 0, 10, 10, "#0000FF80"]
                        ]
                }, {
                    title: "Rotate/Translate vs. Translate/Rotate",
                    transformations:
                        [
                            ["save"],
                            ["rotate", 45],
                            ["translate",10,0],
                            ["fillRect", 0, 0, 10, 10, "#F0000080"],
                            ["restore"],
                            ["save"],
                            ["translate",10,0],
                            ["rotate", 45],
                            ["fillRect", 0, 0, 10, 10, "#0000FF80"],
                            ["restore"],
                        ]
                }, {
                    title: "Translate about center",
                    transformations:
                        [
                            ["fillRect", 10,10,20,20,"#0000FF80"],
                            ["translate",20,20],
                            ["rotate", 45],
                            ["translate",-20,-20],
                            ["fillRect", 10, 10, 20, 20, "#FF000080"]
                        ]
                }, {
                    title: "Bend an arm 45 degrees at Elbow and Wrist",
                    transformations:
                        [
                            ["fillRect", 0, 0, 20, 10, "purple"],
                            ["translate", 20, 0],
                            ["rotate", 45],
                            ["fillRect", 0, 0, 20, 10, "blue"],
                            ["translate", 20, 0],
                            ["rotate", 45],
                            ["fillRect", 0, 0, 10, 10, "green"]
                        ]
                }, {
                    title: "Your turn to play with it",
                }
            ];

            let titles = ["Please select one example"];
            let exampleDivs = [];
            examples.forEach(e => {
                exampleDivs.push(createExample(e.title, e.transformations));
                titles.push(e.title);
            });

            // make a dropdown menu to select examples
            let selectExample = makeSelect(titles, headingDiv);
            selectExample.id = "exampleSelect";

            // switch between different examples
            let currentExample;
            selectExample.onchange = function () {
                if (currentExample) currentExample.style.display = "none";
                let selectedTitle = selectExample.options[selectExample.selectedIndex].text;
                exampleDivs.forEach(ed => {
                    if (ed.id == selectedTitle + "-example") {
                        currentExample = ed;
                    }
                });
                if (currentExample) currentExample.style.display = "flex";
            };
        }
    </script>
</body>

</html>